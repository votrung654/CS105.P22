Váº¥n Ä‘á» Ä‘áº·t ra cho AI: Nhiá»‡m vá»¥ táº¡o file readme: Báº£o tÃ ng 3D trÃªn ná»n táº£ng Web - Slide káº¿ hoáº¡ch Ä‘á»“ Ã¡n.pdf lÃ  slide cá»§a tÃ´i vá» mÃ´n Ä‘á»“ há»a mÃ¡y tÃ­nh, cÅ©ng lÃ  má»¥c tiÃªu, yÃªu cáº§u mÃ  tÃ´i cáº§n hoÃ n thÃ nh chÃ­nh xÃ¡c, Ä‘áº§y Ä‘á»§ cho mÃ´n nÃ y. CÃ²n nhá»¯ng video vÃ  tÃ i liá»‡u cÃ²n láº¡i lÃ  chÆ°Æ¡ng trÃ¬nh mÃ  tÃ´i Ä‘Ã£ há»c. Biáº¿t ráº±ng tÃ´i Ä‘Ã£ tÃ¬m Ä‘Æ°á»£c 3 repo vá» chá»§ Ä‘á» nÃ y mÃ  tÃ´i cáº£m tháº¥y khÃ¡ á»•n. HÃ£y táº¡o cho tÃ´i 1 ná»™i dung file readme Ä‘áº§y Ä‘á»§ nháº¥t Ä‘á»ƒ bao gá»“m háº¿t táº¥t cáº£ yÃªu cáº§u, má»¥c Ä‘Ã­ch, chá»©c nÄƒng, cÃ´ng nghá»‡ mÃ  tÃ´i muá»‘n trong slide vÃ  cÃ³ thá»ƒ nhiá»u hÆ¡n cáº£ tháº¿ (cÃ´ng nghá»‡, kÄ© thuáº­t, thuáº­t toÃ¡n liÃªn quan trong chÆ°Æ¡ng trÃ¬nh há»c), Ä‘á»ƒ tá»« Ä‘Ã³ cÃ¡c cÃ´ng cá»¥ AI hoáº·c láº­p trÃ¬nh viÃªn Ä‘á»u cÃ³ thá»ƒ Ä‘á»c file README nÃ y mÃ  há»— trá»£ tÃ´i táº¡o code cho project hoÃ n thiá»‡n vÃ  Ä‘áº§y Ä‘á»§ nháº¥t vá» chá»§ Ä‘á» Báº£o tÃ ng 3D trÃªn ná»n táº£ng Web (táº¥t nhiÃªn trá»ng tÃ¢m nháº¥t váº«n lÃ  trong slide cá»§a tÃ´i). Äá»“ng thá»i tá»« Ä‘Ã³, táº¡o code Ä‘áº§y Ä‘á»§ cho Ä‘á»“ Ã¡n cá»§a tÃ´i, ghi rÃµ code nÃ o cho file nÃ o, cáº¥u trÃºc thÆ° má»¥c, hÆ°á»›ng dáº«n tÃ´i cÃ i Ä‘áº·t, cháº¡y code, dÃ¹ng code, táº£i vÃ  lÆ°u mÃ´ hÃ¬nh,...NÃ³i chung lÃ  tá»« A-Z.
DÆ°á»›i Ä‘Ã¢y lÃ  ná»™i dung README:
# Báº£o TÃ ng 3D TÆ°Æ¡ng TÃ¡c trÃªn Ná»n Táº£ng Web - Museum Imaginarium

## ğŸ“‹ Giá»›i Thiá»‡u Dá»± Ãn

**Museum Imaginarium** lÃ  má»™t dá»± Ã¡n xÃ¢y dá»±ng báº£o tÃ ng nghá»‡ thuáº­t áº£o 3D tÆ°Æ¡ng tÃ¡c, cho phÃ©p ngÆ°á»i dÃ¹ng khÃ¡m phÃ¡ cÃ¡c khÃ´ng gian triá»ƒn lÃ£m vÃ  tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c hiá»‡n váº­t nghá»‡ thuáº­t má»™t cÃ¡ch sá»‘ng Ä‘á»™ng ngay trÃªn trÃ¬nh duyá»‡t web. Dá»± Ã¡n nÃ y nháº±m má»¥c Ä‘Ã­ch mang láº¡i tráº£i nghiá»‡m tham quan báº£o tÃ ng trá»±c quan, háº¥p dáº«n vÃ  giÃ u thÃ´ng tin, vÆ°á»£t qua nhá»¯ng giá»›i háº¡n vá» Ä‘á»‹a lÃ½ vÃ  thá»i gian.

### ğŸ¯ Má»¥c TiÃªu ChÃ­nh

1.  **XÃ¢y dá»±ng khÃ´ng gian báº£o tÃ ng áº£o 3D tÆ°Æ¡ng tÃ¡c:** Hiá»‡n thá»±c hÃ³a má»™t hoáº·c nhiá»u khÃ´ng gian phÃ²ng trÆ°ng bÃ y 3D chi tiáº¿t, dá»… dÃ ng Ä‘iá»u hÆ°á»›ng.
2.  **Hiá»ƒn thá»‹ hiá»‡n váº­t Ä‘á»™ng:** Cho phÃ©p táº£i vÃ  trÆ°ng bÃ y cÃ¡c mÃ´ hÃ¬nh 3D cá»§a hiá»‡n váº­t (hoáº·c hÃ¬nh áº£nh 2D trÃªn khung tranh) vá»›i kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c.
3.  **Tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng nháº­p vai:** Cung cáº¥p Ä‘iá»u khiá»ƒn camera gÃ³c nhÃ¬n thá»© nháº¥t (FPS-style) vÃ /hoáº·c Orbit controls Ä‘á»ƒ khÃ¡m phÃ¡ khÃ´ng gian vÃ  xem chi tiáº¿t hiá»‡n váº­t.
4.  **Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t:** Äáº£m báº£o tráº£i nghiá»‡m mÆ°á»£t mÃ  trÃªn cÃ¡c trÃ¬nh duyá»‡t web hiá»‡n Ä‘áº¡i báº±ng cÃ¡ch Ã¡p dá»¥ng cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u hÃ³a Ä‘á»“ há»a.
5.  **Giao diá»‡n ngÆ°á»i dÃ¹ng trá»±c quan:** Thiáº¿t káº¿ UI/UX thÃ¢n thiá»‡n, dá»… sá»­ dá»¥ng, bao gá»“m cÃ¡c tÃ­nh nÄƒng há»— trá»£ nhÆ° mini-map, thÃ´ng tin hiá»‡n váº­t (text/audio).

### ğŸ§ Äá»‘i TÆ°á»£ng HÆ°á»›ng Äáº¿n

*   Há»c sinh, sinh viÃªn muá»‘n tÃ¬m hiá»ƒu vá» nghá»‡ thuáº­t vÃ  lá»‹ch sá»­.
*   KhÃ¡ch tham quan báº£o tÃ ng tá»« xa, khÃ´ng cÃ³ Ä‘iá»u kiá»‡n Ä‘áº¿n trá»±c tiáº¿p.
*   NhÃ  nghiÃªn cá»©u, giÃ¡o viÃªn cáº§n cÃ´ng cá»¥ trá»±c quan Ä‘á»ƒ giáº£ng dáº¡y.
*   NgÆ°á»i yÃªu thÃ­ch nghá»‡ thuáº­t, lá»‹ch sá»­ vÃ  cÃ´ng nghá»‡ 3D.

## ğŸŒŸ TÃ­nh NÄƒng Cá»‘t LÃµi

### ğŸ›ï¸ KhÃ´ng Gian Báº£o TÃ ng
1.  **Di Chuyá»ƒn Tá»± Do:** NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ di chuyá»ƒn trong khÃ´ng gian 3D cá»§a báº£o tÃ ng sá»­ dá»¥ng bÃ n phÃ­m (WASD) vÃ  chuá»™t (PointerLockControls).
2.  **Mini-map:** Hiá»ƒn thá»‹ báº£n Ä‘á»“ thu nhá» cá»§a báº£o tÃ ng, vá»‹ trÃ­ ngÆ°á»i dÃ¹ng vÃ  cÃ¡c hiá»‡n váº­t chÃ­nh (sá»­ dá»¥ng Canvas 2D API).
3.  **Ãnh SÃ¡ng vÃ  BÃ³ng Äá»• ChÃ¢n Thá»±c:**
    *   Sá»­ dá»¥ng káº¿t há»£p cÃ¡c loáº¡i Ä‘Ã¨n: AmbientLight, DirectionalLight, PointLight, SpotLight Ä‘á»ƒ táº¡o khÃ´ng khÃ­ vÃ  lÃ m ná»•i báº­t hiá»‡n váº­t.
    *   Ká»¹ thuáº­t Shadow Mapping Ä‘á»ƒ táº¡o bÃ³ng Ä‘á»•.
4.  **Nhiá»u PhÃ²ng TrÆ°ng BÃ y (Má»Ÿ rá»™ng):** Kháº£ nÄƒng thiáº¿t káº¿ vÃ  chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c phÃ²ng trÆ°ng bÃ y vá»›i chá»§ Ä‘á» khÃ¡c nhau.

### ğŸ–¼ï¸ TÆ°Æ¡ng TÃ¡c Hiá»‡n Váº­t
1.  **Xem Chi Tiáº¿t Hiá»‡n Váº­t:**
    *   Cho phÃ©p ngÆ°á»i dÃ¹ng xoay (OrbitControls) vÃ  phÃ³ng to/thu nhá» hiá»‡n váº­t 3D (hoáº·c tranh áº£nh).
    *   Hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t vá» hiá»‡n váº­t (vÄƒn báº£n, mÃ´ táº£) khi ngÆ°á»i dÃ¹ng click hoáº·c tÆ°Æ¡ng tÃ¡c.
2.  **MÃ´ Táº£ Báº±ng Ã‚m Thanh:** TÃ­ch há»£p SpeechSynthesis API Ä‘á»ƒ Ä‘á»c thÃ´ng tin mÃ´ táº£ hiá»‡n váº­t.
3.  **Hiá»‡n Váº­t Äá»™ng (Má»Ÿ rá»™ng):** Kháº£ nÄƒng Ä‘iá»u khiá»ƒn hoáº¡t áº£nh cho cÃ¡c hiá»‡n váº­t cÃ³ thá»ƒ chuyá»ƒn Ä‘á»™ng (sá»­ dá»¥ng `AnimationMixer`).

### ğŸ¨ Giao Diá»‡n vÃ  Tráº£i Nghiá»‡m NgÆ°á»i DÃ¹ng (UI/UX)
1.  **HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng:** ThÃ´ng bÃ¡o hÆ°á»›ng dáº«n Ä‘iá»u khiá»ƒn khi báº¯t Ä‘áº§u.
2.  **Báº£ng ThÃ´ng Tin Hiá»‡n Váº­t:** Hiá»ƒn thá»‹ khi ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c vá»›i hiá»‡n váº­t.
3.  **Giao Diá»‡n Trá»±c Quan:** Thiáº¿t káº¿ Ä‘Æ¡n giáº£n, táº­p trung vÃ o tráº£i nghiá»‡m khÃ¡m phÃ¡.

## ğŸ› ï¸ CÃ´ng Nghá»‡ Sá»­ Dá»¥ng

### ğŸš€ Frontend & 3D Engine
*   **HTML5, CSS3, JavaScript (ES6+):** Ná»n táº£ng web cÆ¡ báº£n.
*   **Three.js (r160+):** ThÆ° viá»‡n JavaScript 3D mÃ£ nguá»“n má»Ÿ, máº¡nh máº½ Ä‘á»ƒ táº¡o vÃ  hiá»ƒn thá»‹ Ä‘á»“ há»a 3D Ä‘á»™ng trong trÃ¬nh duyá»‡t web. Three.js hoáº¡t Ä‘á»™ng dá»±a trÃªn WebGL.
*   **WebGL (Web Graphics Library):** API JavaScript Ä‘á»ƒ render Ä‘á»“ há»a 2D vÃ  3D tÆ°Æ¡ng tÃ¡c trong báº¥t ká»³ trÃ¬nh duyá»‡t web tÆ°Æ¡ng thÃ­ch nÃ o mÃ  khÃ´ng cáº§n plugin.
*   **Vite (hoáº·c Create React App náº¿u dÃ¹ng React):** CÃ´ng cá»¥ build vÃ  phÃ¡t triá»ƒn hiá»‡n Ä‘áº¡i. (Khuyáº¿n nghá»‹ Vite cho tá»‘c Ä‘á»™).

### ğŸ“¦ Model & Asset Loaders
*   **`GLTFLoader` (Three.js):** Äá»ƒ táº£i cÃ¡c mÃ´ hÃ¬nh 3D Ä‘á»‹nh dáº¡ng glTF (GL Transmission Format) vÃ  GLB (phiÃªn báº£n nhá»‹ phÃ¢n cá»§a glTF). ÄÃ¢y lÃ  Ä‘á»‹nh dáº¡ng Ä‘Æ°á»£c khuyáº¿n nghá»‹ cho web.
*   **`DRACOLoader` (Three.js):** Giáº£i nÃ©n cÃ¡c mÃ´ hÃ¬nh Ä‘Æ°á»£c nÃ©n báº±ng Draco, giÃºp giáº£m kÃ­ch thÆ°á»›c file vÃ  thá»i gian táº£i.
*   **`TextureLoader` (Three.js):** Táº£i cÃ¡c file hÃ¬nh áº£nh (JPEG, PNG) lÃ m textures.
*   **`AudioLoader` (Three.js):** Táº£i file Ã¢m thanh (MP3, WAV) cho Ã¢m thanh khÃ´ng gian hoáº·c mÃ´ táº£.

### ğŸ¥ Äiá»u Khiá»ƒn Camera
*   **`PointerLockControls` (Three.js):** Cho phÃ©p Ä‘iá»u khiá»ƒn camera kiá»ƒu FPS (First-Person Shooter), khÃ³a con trá» chuá»™t vÃ  di chuyá»ƒn camera dá»±a trÃªn chuyá»ƒn Ä‘á»™ng chuá»™t.
*   **`OrbitControls` (Three.js):** Cho phÃ©p xoay camera quanh má»™t Ä‘á»‘i tÆ°á»£ng má»¥c tiÃªu, phÃ³ng to/thu nhá».

### âœ¨ Ãnh SÃ¡ng & Váº­t Liá»‡u
*   **Lights:** `AmbientLight`, `DirectionalLight`, `PointLight`, `SpotLight`.
*   **Materials:** `MeshStandardMaterial` (PBR), `MeshBasicMaterial`, `MeshLambertMaterial`, `MeshPhongMaterial` Ä‘á»ƒ Ä‘á»‹nh nghÄ©a bá» máº·t cá»§a Ä‘á»‘i tÆ°á»£ng vÃ  cÃ¡ch chÃºng pháº£n á»©ng vá»›i Ã¡nh sÃ¡ng.
*   **Shadows:** Cáº¥u hÃ¬nh `castShadow` vÃ  `receiveShadow` trÃªn cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ  Ä‘Ã¨n.

### ğŸ¬ Hoáº¡t áº¢nh
*   **`AnimationMixer` (Three.js):** Äiá»u khiá»ƒn vÃ  phÃ¡t cÃ¡c hoáº¡t áº£nh Ä‘Æ°á»£c nhÃºng trong mÃ´ hÃ¬nh 3D (thÆ°á»ng lÃ  tá»« file GLTF/GLB).

### âš™ï¸ APIs TrÃ¬nh Duyá»‡t Há»— Trá»£
*   **Canvas 2D API:** Váº½ mini-map, hiá»ƒn thá»‹ thÃ´ng tin 2D overlay.
*   **Web Audio API:** PhÃ¡t vÃ  Ä‘iá»u khiá»ƒn Ã¢m thanh (cÃ³ thá»ƒ dÃ¹ng `PositionalAudio` cá»§a Three.js).
*   **SpeechSynthesis API:** Chuyá»ƒn vÄƒn báº£n thÃ nh giá»ng nÃ³i cho mÃ´ táº£ hiá»‡n váº­t.
*   **Fullscreen API:** Cho phÃ©p tráº£i nghiá»‡m toÃ n mÃ n hÃ¬nh.
*   **Pointer Lock API:** Cáº§n thiáº¿t cho `PointerLockControls`.

## ğŸ§± MÃ´ HÃ¬nh 3D vÃ  Assets

*   **Äá»‹nh dáº¡ng mÃ´ hÃ¬nh:** Æ¯u tiÃªn GLTF (.gltf, .glb) vÃ¬ tá»‘i Æ°u cho web.
*   **Táº¡o mÃ´ hÃ¬nh:** Sá»­ dá»¥ng Blender, Maya, 3ds Max hoáº·c cÃ¡c cÃ´ng cá»¥ táº¡o mÃ´ hÃ¬nh 3D khÃ¡c.
*   **Tá»‘i Æ°u hÃ³a mÃ´ hÃ¬nh:**
    *   Giáº£m sá»‘ lÆ°á»£ng polygon (Low-poly).
    *   Sá»­ dá»¥ng texture atlases.
    *   NÃ©n Draco.
    *   Baking textures (vÃ­ dá»¥: lightmaps).
*   **Nguá»“n assets:**
    *   Tá»± táº¡o.
    *   CÃ¡c kho tÃ i nguyÃªn 3D miá»…n phÃ­ hoáº·c tráº£ phÃ­ (vÃ­ dá»¥: Sketchfab, TurboSquid, CGTrader) vá»›i giáº¥y phÃ©p phÃ¹ há»£p.
*   **Cáº¥u trÃºc thÆ° má»¥c assets (Ä‘á» xuáº¥t):**
    ```
    /public
        /models
            /room/gallery_room.glb
            /artifacts
                /statue_david.glb
                /painting_mona_lisa_frame.glb
        /textures
            /room/wall_texture.jpg
            /room/floor_texture.jpg
            /artifacts/david_marble.jpg
        /audio
            /descriptions/david_description.mp3
            /ambient/museum_ambience.mp3
    ```

## ğŸ“ Thuáº­t ToÃ¡n vÃ  KhÃ¡i Niá»‡m Äá»“ Há»a Cá»‘t LÃµi

1.  **Rendering Pipeline (Quy trÃ¬nh hiá»ƒn thá»‹ Ä‘á»“ há»a):**
    *   **Modeling Transformations:** Äáº·t cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ o khÃ´ng gian cá»¥c bá»™ cá»§a chÃºng.
    *   **World Transformations:** Chuyá»ƒn Ä‘á»‘i tÆ°á»£ng tá»« khÃ´ng gian cá»¥c bá»™ sang khÃ´ng gian tháº¿ giá»›i.
    *   **View Transformation:** Chuyá»ƒn Ä‘á»•i tá»« khÃ´ng gian tháº¿ giá»›i sang khÃ´ng gian camera (há»‡ tá»a Ä‘á»™ quan sÃ¡t).
    *   **Projection Transformation:** Chiáº¿u cáº£nh 3D lÃªn má»™t máº·t pháº³ng 2D (Perspective hoáº·c Orthographic).
        *   Sá»­ dá»¥ng `PerspectiveCamera` cá»§a Three.js.
    *   **Clipping:** Loáº¡i bá» cÃ¡c pháº§n cá»§a cáº£nh náº±m ngoÃ i khá»‘i lÆ°á»£ng xem (view frustum).
    *   **Rasterization:** Chuyá»ƒn Ä‘á»•i hÃ¬nh há»c 2D thÃ nh cÃ¡c pixel trÃªn mÃ n hÃ¬nh.
2.  **Lighting Models:**
    *   **Ambient:** Ãnh sÃ¡ng mÃ´i trÆ°á»ng Ä‘á»“ng Ä‘á»u.
    *   **Diffuse (Lambertian):** Pháº£n xáº¡ khuáº¿ch tÃ¡n, Ä‘á»™ sÃ¡ng phá»¥ thuá»™c vÃ o gÃ³c giá»¯a phÃ¡p tuyáº¿n bá» máº·t vÃ  hÆ°á»›ng sÃ¡ng.
    *   **Specular (Phong/Blinn-Phong):** Pháº£n xáº¡ gÆ°Æ¡ng, táº¡o Ä‘iá»ƒm sÃ¡ng bÃ³ng.
3.  **Shading Techniques:**
    *   **Flat Shading:** Má»—i máº·t Ä‘a giÃ¡c cÃ³ má»™t mÃ u Ä‘á»“ng nháº¥t.
    *   **Gouraud Shading:** Ná»™i suy mÃ u sáº¯c qua cÃ¡c Ä‘á»‰nh cá»§a Ä‘a giÃ¡c.
    *   **Phong Shading:** Ná»™i suy vector phÃ¡p tuyáº¿n qua cÃ¡c máº·t Ä‘a giÃ¡c, tÃ­nh toÃ¡n mÃ u sáº¯c cho tá»«ng pixel (cho káº¿t quáº£ mÆ°á»£t mÃ  hÆ¡n).
4.  **Texturing:**
    *   Ãp dá»¥ng hÃ¬nh áº£nh 2D (textures) lÃªn bá» máº·t cá»§a mÃ´ hÃ¬nh 3D (UV mapping).
5.  **Collision Detection (PhÃ¡t hiá»‡n va cháº¡m):**
    *   Sá»­ dá»¥ng **Raycasting** tá»« vá»‹ trÃ­ ngÆ°á»i chÆ¡i theo hÆ°á»›ng di chuyá»ƒn Ä‘á»ƒ phÃ¡t hiá»‡n va cháº¡m vá»›i tÆ°á»ng hoáº·c cÃ¡c váº­t thá»ƒ trong báº£o tÃ ng, ngÄƒn ngÆ°á»i chÆ¡i Ä‘i xuyÃªn qua.
    *   CÃ³ thá»ƒ sá»­ dá»¥ng bounding boxes (AABB - Axis-Aligned Bounding Box) hoáº·c bounding spheres Ä‘Æ¡n giáº£n cho cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ tá»‘i Æ°u hÃ³a.
6.  **Interaction Detection:**
    *   Sá»­ dá»¥ng **Raycasting** tá»« camera theo hÆ°á»›ng con trá» chuá»™t Ä‘á»ƒ xÃ¡c Ä‘á»‹nh Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘ang Ä‘Æ°á»£c trá» tá»›i hoáº·c click vÃ o.
7.  **Camera Transformations:**
    *   Thay Ä‘á»•i ma tráº­n `view` cá»§a camera Ä‘á»ƒ di chuyá»ƒn vÃ  xoay gÃ³c nhÃ¬n trong khÃ´ng gian 3D.
    *   `camera.position.set(x, y, z)`
    *   `camera.lookAt(targetVector3)`

## âš¡ Tá»‘i Æ¯u HÃ³a Hiá»‡u Suáº¥t

*   **Level of Detail (LOD):** Hiá»ƒn thá»‹ cÃ¡c phiÃªn báº£n mÃ´ hÃ¬nh cÃ³ Ä‘á»™ chi tiáº¿t khÃ¡c nhau tÃ¹y thuá»™c vÃ o khoáº£ng cÃ¡ch tá»« camera. Xa thÃ¬ dÃ¹ng low-poly, gáº§n thÃ¬ dÃ¹ng high-poly. (`THREE.LOD`)
*   **Frustum Culling:** Three.js tá»± Ä‘á»™ng thá»±c hiá»‡n, chá»‰ render cÃ¡c Ä‘á»‘i tÆ°á»£ng náº±m trong táº§m nhÃ¬n cá»§a camera (view frustum).
*   **Occlusion Culling:** KhÃ´ng render cÃ¡c Ä‘á»‘i tÆ°á»£ng bá»‹ che khuáº¥t hoÃ n toÃ n bá»Ÿi cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c. Ká»¹ thuáº­t nÃ y phá»©c táº¡p hÆ¡n vÃ  cÃ³ thá»ƒ cáº§n cÃ¡c thÆ° viá»‡n hoáº·c thuáº­t toÃ¡n tÃ¹y chá»‰nh. (Raycasting cÃ³ thá»ƒ lÃ  má»™t pháº§n cá»§a giáº£i phÃ¡p Ä‘Æ¡n giáº£n).
*   **Instanced Rendering (`THREE.InstancedMesh`):** Render nhiá»u báº£n sao cá»§a cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng vá»›i hiá»‡u suáº¥t cao (vÃ­ dá»¥: nhiá»u cá»™t giá»‘ng nhau, nhiá»u gháº¿ giá»‘ng nhau).
*   **Geometry Merging:** Gá»™p nhiá»u geometries nhá» thÃ nh má»™t geometry lá»›n Ä‘á»ƒ giáº£m sá»‘ lÆ°á»£ng draw call.
*   **Texture Compression:** Sá»­ dá»¥ng cÃ¡c Ä‘á»‹nh dáº¡ng nÃ©n texture Ä‘Æ°á»£c há»— trá»£ bá»Ÿi WebGL (vÃ­ dá»¥: Basis Universal, ASTC, S3TC, ETC).
*   **Lightmap Baking:** TÃ­nh toÃ¡n trÆ°á»›c hiá»‡u á»©ng Ã¡nh sÃ¡ng phá»©c táº¡p vÃ  "bake" chÃºng vÃ o textures, giáº£m táº£i tÃ­nh toÃ¡n Ã¡nh sÃ¡ng Ä‘á»™ng.
*   **Debounce/Throttle Event Handlers:** Cho cÃ¡c sá»± kiá»‡n nhÆ° di chuyá»ƒn chuá»™t, thay Ä‘á»•i kÃ­ch thÆ°á»›c cá»­a sá»• Ä‘á»ƒ trÃ¡nh thá»±c thi quÃ¡ nhiá»u láº§n.
*   **Sá»­ dá»¥ng `requestAnimationFrame`:** Three.js tá»± Ä‘á»™ng dÃ¹ng cho render loop, Ä‘áº£m báº£o hoáº¡t áº£nh mÆ°á»£t mÃ  vÃ  tiáº¿t kiá»‡m pin.

## ğŸš€ HÆ°á»›ng PhÃ¡t Triá»ƒn Má»Ÿ Rá»™ng (Dá»± kiáº¿n)

1.  **Quáº£n lÃ½ ná»™i dung cho Admin:**
    *   Giao diá»‡n cho phÃ©p admin thÃªm, sá»­a, xÃ³a hiá»‡n váº­t vÃ  thÃ´ng tin liÃªn quan mÃ  khÃ´ng cáº§n can thiá»‡p code.
    *   LÆ°u trá»¯ dá»¯ liá»‡u hiá»‡n váº­t trong cÆ¡ sá»Ÿ dá»¯ liá»‡u (vÃ­ dá»¥: Firebase, Supabase, hoáº·c backend tÃ¹y chá»‰nh).
2.  **Tráº£i nghiá»‡m Äa ngÆ°á»i dÃ¹ng (Multi-user):**
    *   Cho phÃ©p nhiá»u ngÆ°á»i dÃ¹ng cÃ¹ng tham quan báº£o tÃ ng má»™t lÃºc.
    *   Hiá»ƒn thá»‹ avatar cá»§a nhá»¯ng ngÆ°á»i dÃ¹ng khÃ¡c.
    *   TÃ­ch há»£p chat text hoáº·c voice chat (sá»­ dá»¥ng WebSockets, WebRTC).
3.  **Avatar NgÆ°á»i DÃ¹ng vÃ  AI Tour Guide:**
    *   Cho phÃ©p ngÆ°á»i dÃ¹ng tÃ¹y chá»‰nh avatar.
    *   PhÃ¡t triá»ƒn má»™t AI tour guide cÃ³ thá»ƒ dáº«n Ä‘Æ°á»ng vÃ  thuyáº¿t minh vá» cÃ¡c hiá»‡n váº­t.
4.  **Má»Ÿ rá»™ng KhÃ´ng Gian Báº£o TÃ ng:**
    *   Thiáº¿t káº¿ nhiá»u phÃ²ng trÆ°ng bÃ y vá»›i cÃ¡c chá»§ Ä‘á» khÃ¡c nhau (vÃ­ dá»¥: nghá»‡ thuáº­t cá»• Ä‘iá»ƒn, nghá»‡ thuáº­t hiá»‡n Ä‘áº¡i, khoa há»c, lá»‹ch sá»­ tá»± nhiÃªn).
    *   Táº¡o há»‡ thá»‘ng chuyá»ƒn Ä‘á»•i hoáº·c táº£i Ä‘á»™ng giá»¯a cÃ¡c phÃ²ng.
5.  **TÃ­ch há»£p VR/AR:**
    *   Sá»­ dá»¥ng WebXR API Ä‘á»ƒ há»— trá»£ tráº£i nghiá»‡m thá»±c táº¿ áº£o (VR) vÃ  thá»±c táº¿ tÄƒng cÆ°á»ng (AR).
6.  **Gamification:**
    *   ThÃªm cÃ¡c yáº¿u tá»‘ trÃ² chÆ¡i nhÆ° tÃ¬m kiáº¿m áº©n váº­t, giáº£i Ä‘á»‘ liÃªn quan Ä‘áº¿n hiá»‡n váº­t.
7.  **Cáº£i thiá»‡n TÆ°Æ¡ng tÃ¡c Váº­t lÃ½:**
    *   Sá»­ dá»¥ng thÆ° viá»‡n váº­t lÃ½ (vÃ­ dá»¥: Rapier, Cannon.js, Ammo.js Ä‘Æ°á»£c tÃ­ch há»£p vá»›i Three.js) Ä‘á»ƒ cho phÃ©p tÆ°Æ¡ng tÃ¡c váº­t lÃ½ thá»±c táº¿ hÆ¡n vá»›i má»™t sá»‘ hiá»‡n váº­t.

## ğŸ“ Cáº¥u TrÃºc ThÆ° Má»¥c Dá»± Ãn (Äá» xuáº¥t)
Use code with caution.
Markdown
/museum-3d-web/
|-- /public/ # Chá»©a cÃ¡c assets tÄ©nh Ä‘Æ°á»£c phá»¥c vá»¥ trá»±c tiáº¿p
| |-- /models/ # Chá»©a cÃ¡c file mÃ´ hÃ¬nh 3D (GLB, GLTF)
| | |-- room_gallery.glb
| | -- artifact_statue.glb | |-- /textures/ # Chá»©a cÃ¡c file texture (JPG, PNG) | | |-- wall_marble.jpg | |-- floor_wood.jpg
| |-- /audio/ # Chá»©a cÃ¡c file Ã¢m thanh
| | |-- ambient_sound.mp3
| | -- artifact_description.mp3 |-- favicon.ico
|-- /src/ # MÃ£ nguá»“n chÃ­nh cá»§a á»©ng dá»¥ng
| |-- /components/ # CÃ¡c thÃ nh pháº§n tÃ¡i sá»­ dá»¥ng (React components náº¿u dÃ¹ng React)
| | |-- /Scene/
| | | |-- SceneManager.js # Quáº£n lÃ½ scene, camera, renderer
| | | |-- Lights.js # Thiáº¿t láº­p Ã¡nh sÃ¡ng
| | | -- Room.js # Táº¡o hÃ¬nh há»c phÃ²ng | | |-- /Player/ | | |-- PlayerControls.js # Logic Ä‘iá»u khiá»ƒn ngÆ°á»i chÆ¡i
| | |-- /Artifacts/
| | | -- Artifact.js # Component hiá»ƒn thá»‹ vÃ  tÆ°Æ¡ng tÃ¡c hiá»‡n váº­t | |-- /UI/
| | |-- MiniMap.js # Logic mini-map
| | |-- InfoPanel.js # Báº£ng thÃ´ng tin hiá»‡n váº­t
| | -- LoadingScreen.js # MÃ n hÃ¬nh táº£i | |-- /utils/ # CÃ¡c hÃ m tiá»‡n Ã­ch | | |-- assetLoaders.js # HÃ m táº£i GLTF, Texture, Audio | |-- mathHelpers.js # HÃ m tÃ­nh toÃ¡n, vÃ­ dá»¥: radians to degrees
| |-- /data/ # Dá»¯ liá»‡u tÄ©nh (vÃ­ dá»¥: metadata hiá»‡n váº­t)
| | -- artifactsData.js | |-- /styles/ # Files CSS/SCSS | |-- main.css
| |-- main.js # Äiá»ƒm vÃ o chÃ­nh cá»§a á»©ng dá»¥ng JavaScript
| -- App.js # Component gá»‘c (náº¿u dÃ¹ng React) |-- index.html # File HTML chÃ­nh |-- vite.config.js # Cáº¥u hÃ¬nh Vite (náº¿u dÃ¹ng Vite) |-- package.json-- README.md
## ğŸš€ CÃ i Äáº·t vÃ  Cháº¡y Dá»± Ãn

### YÃªu Cáº§u Cáº§n Thiáº¿t
*   Node.js vÃ  npm (hoáº·c yarn) Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t.
*   Má»™t trÃ¬nh duyá»‡t web hiá»‡n Ä‘áº¡i há»— trá»£ WebGL (Chrome, Firefox, Edge, Safari).

### CÃ¡c BÆ°á»›c CÃ i Äáº·t
1.  **Clone repository (Sau khi báº¡n táº¡o nÃ³):**
    ```bash
    git clone <your-repository-url>
    cd museum-3d-web
    ```
2.  **CÃ i Ä‘áº·t dependencies:**
    ```bash
    npm install
    # hoáº·c
    yarn install
    ```
    CÃ¡c dependencies chÃ­nh cáº§n cÃ³ trong `package.json`:
    *   `three`: ThÆ° viá»‡n Three.js.
    *   `vite`: (Náº¿u dÃ¹ng Vite) CÃ´ng cá»¥ build.
    *   (CÃ¡c thÆ° viá»‡n React náº¿u báº¡n quyáº¿t Ä‘á»‹nh dÃ¹ng React: `react`, `react-dom`, `@react-three/fiber`, `@react-three/drei`)

### Cháº¡y Dá»± Ãn (Development Mode)
*   **Náº¿u dÃ¹ng Vite:**
    ```bash
    npm run dev
    # hoáº·c
    yarn dev
    ```
    Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p vÃ o Ä‘á»‹a chá»‰ Ä‘Æ°á»£c Vite cung cáº¥p (thÆ°á»ng lÃ  `http://localhost:5173`).

*   **Náº¿u khÃ´ng dÃ¹ng framework/build tool (chá»‰ HTML, JS thuáº§n):**
    Báº¡n cáº§n má»™t HTTP server Ä‘Æ¡n giáº£n Ä‘á»ƒ phá»¥c vá»¥ cÃ¡c file do cÃ¡c háº¡n cháº¿ vá» CORS khi táº£i models/textures tá»« `file:///` protocol.
    1.  CÃ i Ä‘áº·t `http-server` global (náº¿u chÆ°a cÃ³):
        ```bash
        npm install -g http-server
        ```
    2.  Cháº¡y server tá»« thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n:
        ```bash
        http-server .
        ```
        Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p `http://localhost:8080` (hoáº·c port mÃ  `http-server` hiá»ƒn thá»‹).
    3.  Hoáº·c dÃ¹ng Python (náº¿u cÃ³ Python cÃ i sáºµn):
        ```bash
        # Python 3
        python -m http.server
        # Python 2
        python -m SimpleHTTPServer
        ```
        Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p `http://localhost:8000`.

### Build Dá»± Ãn (Production Mode - náº¿u dÃ¹ng Vite)
```bash
npm run build
# hoáº·c
yarn build
Use code with caution.
CÃ¡c file build sáº½ náº±m trong thÆ° má»¥c /dist, sáºµn sÃ ng Ä‘á»ƒ deploy lÃªn má»™t static web host.
ğŸ’¡ Sá»­ Dá»¥ng vÃ  TÃ¹y Chá»‰nh
ThÃªm Hiá»‡n Váº­t Má»›i:
Äáº·t file model .glb hoáº·c .gltf vÃ o thÆ° má»¥c /public/models/artifacts/.
Náº¿u cÃ³ texture, Ä‘áº·t vÃ o /public/textures/artifacts/.
Náº¿u cÃ³ audio mÃ´ táº£, Ä‘áº·t vÃ o /public/audio/descriptions/.
Cáº­p nháº­t file dá»¯ liá»‡u (vÃ­ dá»¥ /src/data/artifactsData.js) vá»›i thÃ´ng tin vá» hiá»‡n váº­t má»›i: tÃªn, mÃ´ táº£, Ä‘Æ°á»ng dáº«n file model/texture/audio, vá»‹ trÃ­ Ä‘áº·t trong báº£o tÃ ng.
HÃ m táº£i vÃ  hiá»ƒn thá»‹ hiá»‡n váº­t trong Artifact.js sáº½ Ä‘á»c dá»¯ liá»‡u nÃ y.
Thay Äá»•i KhÃ´ng Gian Báº£o TÃ ng:
Chá»‰nh sá»­a file model cá»§a phÃ²ng trÆ°ng bÃ y (vÃ­ dá»¥: /public/models/room/gallery_room.glb) báº±ng Blender hoáº·c cÃ´ng cá»¥ tÆ°Æ¡ng tá»±.
Äiá»u chá»‰nh textures cá»§a phÃ²ng trong /public/textures/room/.
Cáº­p nháº­t logic Ä‘áº·t hiá»‡n váº­t náº¿u layout phÃ²ng thay Ä‘á»•i Ä‘Ã¡ng ká»ƒ.
Äiá»u Chá»‰nh Ãnh SÃ¡ng:
CÃ¡c thÃ´ng sá»‘ Ã¡nh sÃ¡ng (vá»‹ trÃ­, cÆ°á»ng Ä‘á»™, mÃ u sáº¯c) Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong /src/components/Scene/Lights.js.
TÃ¹y Chá»‰nh Äiá»u Khiá»ƒn:
CÃ¡c tÃ¹y chá»n cho PointerLockControls vÃ  OrbitControls (vÃ­ dá»¥: tá»‘c Ä‘á»™ di chuyá»ƒn, Ä‘á»™ nháº¡y chuá»™t) cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh trong /src/components/Player/PlayerControls.js hoáº·c nÆ¡i khá»Ÿi táº¡o controls.
ğŸ¤ ÄÃ³ng GÃ³p
Náº¿u báº¡n muá»‘n Ä‘Ã³ng gÃ³p vÃ o dá»± Ã¡n nÃ y (sau khi báº¡n táº¡o repo cÃ´ng khai):
Fork repository.
Táº¡o má»™t nhÃ¡nh má»›i cho tÃ­nh nÄƒng cá»§a báº¡n (git checkout -b feature/AmazingFeature).
Commit cÃ¡c thay Ä‘á»•i cá»§a báº¡n (git commit -m 'Add some AmazingFeature').
Push lÃªn nhÃ¡nh Ä‘Ã³ (git push origin feature/AmazingFeature).
Má»Ÿ má»™t Pull Request.
ğŸ“„ Giáº¥y PhÃ©p
Dá»± Ã¡n nÃ y Ä‘Æ°á»£c cáº¥p phÃ©p dÆ°á»›i Giáº¥y phÃ©p MIT. Xem file LICENSE Ä‘á»ƒ biáº¿t chi tiáº¿t (Báº¡n nÃªn táº¡o file nÃ y).
## ğŸ’» Cáº¥u TrÃºc Code vÃ  Code Khá»Ÿi Äáº§u (JavaScript thuáº§n + Three.js)

ÄÃ¢y lÃ  má»™t cáº¥u trÃºc ráº¥t cÆ¡ báº£n Ä‘á»ƒ báº¡n báº¯t Ä‘áº§u. Náº¿u báº¡n dÃ¹ng React + R3F, cáº¥u trÃºc sáº½ khÃ¡c.

**1. `index.html`:**
```html
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báº£o TÃ ng 3D Web</title>
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
    <div id="loading-screen">
        <h1>Äang táº£i Báº£o TÃ ng...</h1>
        <p>Vui lÃ²ng chá» trong giÃ¢y lÃ¡t.</p>
    </div>
    <canvas id="museum-canvas"></canvas>
    <div id="info-panel" style="display:none;">
        <h2 id="artifact-title"></h2>
        <p id="artifact-description"></p>
        <button id="close-info-panel">ÄÃ³ng</button>
        <button id="play-audio-description">Nghe mÃ´ táº£</button>
    </div>
    <div id="mini-map-container">
        <canvas id="mini-map-canvas"></canvas>
    </div>
    <div id="controls-hint">
        <p>Di chuyá»ƒn: WASD | NhÃ¬n: Chuá»™t | TÆ°Æ¡ng tÃ¡c: Click</p>
    </div>
    <!-- Import Three.js -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="src/main.js"></script>
</body>
</html>
Use code with caution.
2. src/styles/main.css:
body, html {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #000;
    color: white;
    font-family: Arial, sans-serif;
}

#museum-canvas {
    display: block; /* Sáº½ Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi JS */
}

#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
}

#info-panel {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background-color: rgba(50, 50, 50, 0.9);
    padding: 15px;
    border-radius: 8px;
    max-width: 300px;
    z-index: 10;
}
#info-panel h2 { margin-top: 0;}

#mini-map-container {
    position: fixed;
    top: 20px;
    right: 20px;
    border: 1px solid #555;
    z-index: 10;
}
#mini-map-canvas {
    width: 150px;
    height: 150px;
}

#controls-hint {
    position: fixed;
    bottom: 10px;
    width: 100%;
    text-align: center;
    font-size: 0.8em;
    color: #ccc;
    z-index: 5;
}
Use code with caution.
Css
3. src/main.js (Äiá»ƒm vÃ o chÃ­nh):
import * as THREE from 'three';
import SceneManager from './components/Scene/SceneManager.js';
import PlayerControls from './components/Player/PlayerControls.js';
import { loadArtifacts } from './utils/assetLoaders.js';
import artifactsData from './data/artifactsData.js'; // Báº¡n sáº½ táº¡o file nÃ y

const loadingScreen = document.getElementById('loading-screen');
const canvas = document.getElementById('museum-canvas');
const infoPanel = document.getElementById('info-panel');
const artifactTitle = document.getElementById('artifact-title');
const artifactDescription = document.getElementById('artifact-description');
const closeInfoButton = document.getElementById('close-info-panel');
const playAudioButton = document.getElementById('play-audio-description');

let sceneManager, playerControls;
let currentArtifactAudio = null;
const speechSynth = window.speechSynthesis;

async function init() {
    sceneManager = new SceneManager(canvas);
    playerControls = new PlayerControls(sceneManager.camera, sceneManager.renderer.domElement, sceneManager.scene);
    
    // Táº£i vÃ  thÃªm hiá»‡n váº­t
    const loadedArtifacts = await loadArtifacts(artifactsData, sceneManager.scene);
    playerControls.setCollidableObjects(sceneManager.getCollidableObjects()); // Cáº­p nháº­t cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ va cháº¡m

    // áº¨n mÃ n hÃ¬nh táº£i
    loadingScreen.style.display = 'none';
    canvas.style.display = 'block';

    // Xá»­ lÃ½ tÆ°Æ¡ng tÃ¡c
    setupInteraction(loadedArtifacts);
    
    animate();
}

function setupInteraction(artifacts) {
    window.addEventListener('click', (event) => {
        if (!playerControls.isLocked()) return; // Chá»‰ tÆ°Æ¡ng tÃ¡c khi PointerLock active

        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        // Láº¥y tá»a Ä‘á»™ chuá»™t chuáº©n hÃ³a (-1 Ä‘áº¿n +1)
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        
        // Raycast tá»« camera
        raycaster.setFromCamera(mouse, sceneManager.camera);
        
        const intersects = raycaster.intersectObjects(artifacts.map(a => a.mesh), false);

        if (intersects.length > 0) {
            const intersectedObject = intersects[0].object;
            const artifactData = artifacts.find(a => a.mesh === intersectedObject || (intersectedObject.parent && a.mesh === intersectedObject.parent));
            
            if (artifactData && artifactData.data) {
                showInfoPanel(artifactData.data);
                playerControls.pauseMovement(true); // Dá»«ng di chuyá»ƒn khi xem thÃ´ng tin
            }
        }
    });

    closeInfoButton.addEventListener('click', () => {
        hideInfoPanel();
        playerControls.pauseMovement(false); // Cho phÃ©p di chuyá»ƒn láº¡i
    });

    playAudioButton.addEventListener('click', () => {
        const description = artifactDescription.textContent;
        if (description && speechSynth) {
            if (currentArtifactAudio && speechSynth.speaking) {
                speechSynth.cancel(); // Dá»«ng audio Ä‘ang phÃ¡t náº¿u cÃ³
            }
            const utterance = new SpeechSynthesisUtterance(description);
            utterance.lang = 'vi-VN'; // Äáº·t ngÃ´n ngá»¯
            speechSynth.speak(utterance);
            currentArtifactAudio = utterance;
        }
    });
}

function showInfoPanel(data) {
    artifactTitle.textContent = data.name;
    artifactDescription.textContent = data.description;
    infoPanel.style.display = 'block';
    // Táº¡m thá»i vÃ´ hiá»‡u hÃ³a PointerLock Ä‘á»ƒ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ click nÃºt
    document.exitPointerLock(); 
}

function hideInfoPanel() {
    infoPanel.style.display = 'none';
    if (currentArtifactAudio && speechSynth.speaking) {
        speechSynth.cancel();
    }
    // YÃªu cáº§u láº¡i PointerLock
    sceneManager.renderer.domElement.requestPointerLock();
}


function animate() {
    requestAnimationFrame(animate);
    const delta = sceneManager.clock.getDelta();
    playerControls.update(delta);
    sceneManager.render();
}

init().catch(error => console.error("Initialization failed:", error));
Use code with caution.
JavaScript
4. src/components/Scene/SceneManager.js:
import * as THREE from 'three';
import Room from './Room.js';
import Lights from './Lights.js';

export default class SceneManager {
    constructor(canvas) {
        this.canvas = canvas;
        this.screenDimensions = {
            width: window.innerWidth,
            height: window.innerHeight
        };

        this.scene = this.buildScene();
        this.renderer = this.buildRenderer(this.screenDimensions);
        this.camera = this.buildCamera(this.screenDimensions);
        this.room = new Room(this.scene, 20, 5, 30); // width, height, depth
        this.lights = new Lights(this.scene);
        this.clock = new THREE.Clock();
        
        this.setupResizeListener();
    }

    buildScene() {
        const scene = new THREE.Scene();
        scene.background = new THREE.Color("#2a2a2a");
        // scene.fog = new THREE.Fog(0x2a2a2a, 10, 50); // TÃ¹y chá»n: thÃªm sÆ°Æ¡ng mÃ¹
        return scene;
    }

    buildRenderer({ width, height }) {
        const renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // Hoáº·c THREE.VSMShadowMap
        return renderer;
    }

    buildCamera({ width, height }) {
        const aspectRatio = width / height;
        const fieldOfView = 60;
 Ğ´Ñ€ĞµĞ² 0.1;
        const farPlane = 1000;
        const camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane);
        camera.position.set(0, 1.6, 13); // Vá»‹ trÃ­ ban Ä‘áº§u cá»§a ngÆ°á»i chÆ¡i (chiá»u cao 1.6m, lÃ¹i vá» sau)
        return camera;
    }

    setupResizeListener() {
        window.addEventListener('resize', () => {
            this.screenDimensions.width = window.innerWidth;
            this.screenDimensions.height = window.innerHeight;
            this.camera.aspect = this.screenDimensions.width / this.screenDimensions.height;
            this.camera.updateProjectionMatrix();
            this.renderer.setSize(this.screenDimensions.width, this.screenDimensions.height);
            this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        });
    }
    
    getCollidableObjects() {
        // Tráº£ vá» cÃ¡c object mÃ  ngÆ°á»i chÆ¡i cÃ³ thá»ƒ va cháº¡m (tÆ°á»ng, sÃ n, hiá»‡n váº­t lá»›n)
        return [this.room.floor, ...this.room.walls, /*...meshes cá»§a cÃ¡c hiá»‡n váº­t lá»›n*/];
    }

    render() {
        this.renderer.render(this.scene, this.camera);
    }
}
Use code with caution.
JavaScript
5. src/components/Scene/Room.js:
import * as THREE from 'three';
import { TextureLoader } from 'three';

export default class Room {
    constructor(scene, width, height, depth) {
        this.scene = scene;
        this.width = width;
        this.height = height;
        this.depth = depth;
        this.walls = [];

        this.textureLoader = new TextureLoader();
        this.createRoom();
    }

    createRoom() {
        // SÃ n
        const floorGeometry = new THREE.PlaneGeometry(this.width, this.depth);
        const floorTexture = this.textureLoader.load('textures/room/floor_wood.jpg'); // Thay báº±ng path Ä‘Ãºng
        floorTexture.wrapS = THREE.RepeatWrapping;
        floorTexture.wrapT = THREE.RepeatWrapping;
        floorTexture.repeat.set(this.width/2, this.depth/2); // Láº·p texture
        const floorMaterial = new THREE.MeshStandardMaterial({ map: floorTexture, side: THREE.DoubleSide });
        this.floor = new THREE.Mesh(floorGeometry, floorMaterial);
        this.floor.rotation.x = -Math.PI / 2; // Xoay sÃ n náº±m ngang
        this.floor.receiveShadow = true;
        this.floor.name = "floor";
        this.scene.add(this.floor);

        // Tráº§n
        const ceilingGeometry = new THREE.PlaneGeometry(this.width, this.depth);
        const ceilingMaterial = new THREE.MeshStandardMaterial({ color: 0xdddddd, side: THREE.DoubleSide });
        const ceiling = new THREE.Mesh(ceilingGeometry, ceilingMaterial);
        ceiling.position.y = this.height;
        ceiling.rotation.x = Math.PI / 2;
        ceiling.name = "ceiling";
        this.scene.add(ceiling);

        // TÆ°á»ng
        const wallMaterial = new THREE.MeshStandardMaterial({ 
            map: this.textureLoader.load('textures/room/wall_marble.jpg'), // Thay báº±ng path Ä‘Ãºng
            side: THREE.DoubleSide 
        });
        wallMaterial.map.wrapS = THREE.RepeatWrapping;
        wallMaterial.map.wrapT = THREE.RepeatWrapping;
        wallMaterial.map.repeat.set(this.width/4, this.height/4);


        // TÆ°á»ng trÆ°á»›c (phÃ­a +Z)
        const frontWall = this.createWall(this.width, this.height, wallMaterial);
        frontWall.position.set(0, this.height / 2, -this.depth / 2);
        frontWall.name = "frontWall";
        this.scene.add(frontWall);
        this.walls.push(frontWall);

        // TÆ°á»ng sau (phÃ­a -Z)
        const backWall = this.createWall(this.width, this.height, wallMaterial);
        backWall.position.set(0, this.height / 2, this.depth / 2);
        backWall.rotation.y = Math.PI;
        backWall.name = "backWall";
        this.scene.add(backWall);
        this.walls.push(backWall);

        // TÆ°á»ng trÃ¡i (phÃ­a -X)
        const leftWall = this.createWall(this.depth, this.height, wallMaterial);
        leftWall.position.set(-this.width / 2, this.height / 2, 0);
        leftWall.rotation.y = Math.PI / 2;
        leftWall.name = "leftWall";
        this.scene.add(leftWall);
        this.walls.push(leftWall);

        // TÆ°á»ng pháº£i (phÃ­a +X)
        const rightWall = this.createWall(this.depth, this.height, wallMaterial);
        rightWall.position.set(this.width / 2, this.height / 2, 0);
        rightWall.rotation.y = -Math.PI / 2;
        rightWall.name = "rightWall";
        this.scene.add(rightWall);
        this.walls.push(rightWall);
    }

    createWall(width, height, material) {
        const geometry = new THREE.PlaneGeometry(width, height);
        const wall = new THREE.Mesh(geometry, material.clone()); // Clone material Ä‘á»ƒ cÃ³ thá»ƒ set repeat khÃ¡c nhau náº¿u cáº§n
        wall.receiveShadow = true;
        wall.castShadow = true; // TÆ°á»ng cÅ©ng cÃ³ thá»ƒ Ä‘á»• bÃ³ng náº¿u cÃ³ váº­t thá»ƒ khÃ¡c chiáº¿u sÃ¡ng vÃ o
        return wall;
    }
}
Use code with caution.
JavaScript
6. src/components/Scene/Lights.js:
import * as THREE from 'three';

export default class Lights {
    constructor(scene) {
        this.scene = scene;
        this.addLights();
    }

    addLights() {
        // Ambient light
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // MÃ u tráº¯ng, cÆ°á»ng Ä‘á»™ 0.5
        this.scene.add(ambientLight);

        // Directional light (giá»‘ng máº·t trá»i)
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 10, 7.5);
        directionalLight.castShadow = true;
        // Cáº¥u hÃ¬nh shadow map cho directional light
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        directionalLight.shadow.camera.near = 0.5;
        directionalLight.shadow.camera.far = 50;
        directionalLight.shadow.camera.left = -15;
        directionalLight.shadow.camera.right = 15;
        directionalLight.shadow.camera.top = 15;
        directionalLight.shadow.camera.bottom = -15;
        this.scene.add(directionalLight);
        // const helper = new THREE.DirectionalLightHelper( directionalLight, 5 );
        // this.scene.add( helper );


        // CÃ³ thá»ƒ thÃªm PointLights hoáº·c SpotLights Ä‘á»ƒ lÃ m ná»•i báº­t cÃ¡c hiá»‡n váº­t
        // const spotLight = new THREE.SpotLight(0xffffff, 0.7, 10, Math.PI / 8, 0.5, 2);
        // spotLight.position.set(0, 4, 0);
        // spotLight.target.position.set(0, 0, 0); // HÆ°á»›ng spotlight vÃ o gá»‘c tá»a Ä‘á»™
        // spotLight.castShadow = true;
        // this.scene.add(spotLight);
        // this.scene.add(spotLight.target);
        // const spotLightHelper = new THREE.SpotLightHelper( spotLight );
        // this.scene.add( spotLightHelper );
    }
}
Use code with caution.
JavaScript
7. src/components/Player/PlayerControls.js:
import * as THREE from 'three';
import { PointerLockControls } from 'three/addons/controls/PointerLockControls.js';

export default class PlayerControls {
    constructor(camera, domElement, scene) {
        this.camera = camera;
        this.domElement = domElement;
        this.scene = scene; // Cáº§n scene Ä‘á»ƒ láº¥y cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ va cháº¡m
        
        this.controls = new PointerLockControls(this.camera, this.domElement);
        
        this.moveForward = false;
        this.moveBackward = false;
        this.moveLeft = false;
        this.moveRight = false;
        this.canJump = false; // Sáº½ khÃ´ng dÃ¹ng jump trong báº£o tÃ ng
        this.isPaused = false;

        this.velocity = new THREE.Vector3();
        this.direction = new THREE.Vector3();
        this.speed = 5.0; // Tá»‘c Ä‘á»™ di chuyá»ƒn

        this.collidableObjects = []; // Danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ kiá»ƒm tra va cháº¡m

        this.setupEventListeners();
    }

    setCollidableObjects(objects) {
        this.collidableObjects = objects;
    }
    
    pauseMovement(pause) {
        this.isPaused = pause;
        if (pause) {
            this.velocity.set(0,0,0); // Dá»«ng ngay láº­p tá»©c
            this.moveForward = this.moveBackward = this.moveLeft = this.moveRight = false;
        }
    }


    setupEventListeners() {
        this.domElement.addEventListener('click', () => {
            if (!this.isPaused) this.controls.lock();
        });

        this.controls.addEventListener('lock', () => console.log('Pointer locked'));
        this.controls.addEventListener('unlock', () => {
            console.log('Pointer unlocked');
            // Khi unlock, reset tráº¡ng thÃ¡i di chuyá»ƒn Ä‘á»ƒ khÃ´ng bá»‹ káº¹t phÃ­m
            this.moveForward = this.moveBackward = this.moveLeft = this.moveRight = false;
        });

        document.addEventListener('keydown', (event) => this.onKeyDown(event));
        document.addEventListener('keyup', (event) => this.onKeyUp(event));
    }

    onKeyDown(event) {
        if (this.isPaused) return;
        switch (event.code) {
            case 'ArrowUp':
            case 'KeyW':
                this.moveForward = true;
                break;
            case 'ArrowLeft':
            case 'KeyA':
                this.moveLeft = true;
                break;
            case 'ArrowDown':
            case 'KeyS':
                this.moveBackward = true;
                break;
            case 'ArrowRight':
            case 'KeyD':
                this.moveRight = true;
                break;
        }
    }

    onKeyUp(event) {
        if (this.isPaused) return;
        switch (event.code) {
            case 'ArrowUp':
            case 'KeyW':
                this.moveForward = false;
                break;
            case 'ArrowLeft':
            case 'KeyA':
                this.moveLeft = false;
                break;
            case 'ArrowDown':
            case 'KeyS':
                this.moveBackward = false;
                break;
            case 'ArrowRight':
            case 'KeyD':
                this.moveRight = false;
                break;
        }
    }
    
    checkCollision(moveDirection) {
        const playerPosition = this.camera.position.clone();
        const raycaster = new THREE.Raycaster(playerPosition, moveDirection.clone().normalize());
        const intersects = raycaster.intersectObjects(this.collidableObjects, true); // true for recursive

        if (intersects.length > 0 && intersects[0].distance < 0.5) { // 0.5 lÃ  khoáº£ng cÃ¡ch an toÃ n
            return true; // CÃ³ va cháº¡m
        }
        return false; // KhÃ´ng va cháº¡m
    }


    update(delta) {
        if (!this.controls.isLocked || this.isPaused) {
            return;
        }

        this.velocity.x -= this.velocity.x * 10.0 * delta; // Ma sÃ¡t theo X
        this.velocity.z -= this.velocity.z * 10.0 * delta; // Ma sÃ¡t theo Z
        // KhÃ´ng cÃ³ trá»ng lá»±c trong báº£o tÃ ng, giá»¯ y cá»‘ Ä‘á»‹nh
        // this.velocity.y -= 9.8 * 100.0 * delta; // Trá»ng lá»±c (náº¿u cáº§n)

        this.direction.z = Number(this.moveForward) - Number(this.moveBackward);
        this.direction.x = Number(this.moveRight) - Number(this.moveLeft);
        this.direction.normalize(); // Äáº£m báº£o tá»‘c Ä‘á»™ á»•n Ä‘á»‹nh khi di chuyá»ƒn chÃ©o

        const intendedMove = new THREE.Vector3();
        if (this.moveForward || this.moveBackward) {
            intendedMove.z = this.direction.z * this.speed * delta;
        }
        if (this.moveLeft || this.moveRight) {
            intendedMove.x = this.direction.x * this.speed * delta;
        }
        
        // Kiá»ƒm tra va cháº¡m trÆ°á»›c khi di chuyá»ƒn
        const worldDirection = new THREE.Vector3();
        this.camera.getWorldDirection(worldDirection);
        worldDirection.y = 0; // Chá»‰ di chuyá»ƒn trÃªn máº·t pháº³ng XZ
        worldDirection.normalize();

        const rightDirection = new THREE.Vector3().crossVectors(this.camera.up, worldDirection).normalize();

        let actualMoveX = 0;
        let actualMoveZ = 0;

        if (this.moveForward || this.moveBackward) {
            const moveStepZ = worldDirection.clone().multiplyScalar(this.direction.z * this.speed * delta);
            if (!this.checkCollision(worldDirection.clone().multiplyScalar(this.direction.z))) {
                 actualMoveZ = moveStepZ.z;
                 // Giá»¯ X khÃ´ng Ä‘á»•i tá»« hÆ°á»›ng nÃ y Ä‘á»ƒ trÃ¡nh cá»™ng dá»“n khÃ´ng mong muá»‘n
                 actualMoveX += moveStepZ.x; 
            }
        }
        if (this.moveLeft || this.moveRight) {
            const moveStepX = rightDirection.clone().multiplyScalar(this.direction.x * this.speed * delta);
             if (!this.checkCollision(rightDirection.clone().multiplyScalar(this.direction.x))) {
                 actualMoveX += moveStepX.x;
                 // Giá»¯ Z khÃ´ng Ä‘á»•i tá»« hÆ°á»›ng nÃ y
                 actualMoveZ += moveStepX.z;
            }
        }
        
        this.controls.moveRight(actualMoveX);
        this.controls.moveForward(actualMoveZ);

        // Giá»¯ camera á»Ÿ Ä‘á»™ cao cá»‘ Ä‘á»‹nh (vÃ­ dá»¥: chiá»u cao máº¯t ngÆ°á»i)
        this.camera.position.y = 1.6; 
    }
}
Use code with caution.
JavaScript
8. src/utils/assetLoaders.js:
import * as THREE from 'three';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
import Artifact from '../components/Artifacts/Artifact.js';

const gltfLoader = new GLTFLoader();
const textureLoader = new THREE.TextureLoader();

export async function loadGLTFModel(path) {
    return new Promise((resolve, reject) => {
        gltfLoader.load(path, (gltf) => {
            // Báº­t shadow cho táº¥t cáº£ mesh trong model
            gltf.scene.traverse(function (child) {
                if (child.isMesh) {
                    child.castShadow = true;
                    child.receiveShadow = true; 
                }
            });
            resolve(gltf.scene);
        }, undefined, reject);
    });
}

export async function loadTexture(path) {
    return new Promise((resolve, reject) => {
        textureLoader.load(path, resolve, undefined, reject);
    });
}

export async function loadArtifacts(artifactsData, scene) {
    const loadedArtifacts = [];
    for (const data of artifactsData) {
        let mesh;
        if (data.type === 'painting') {
            const texture = await loadTexture(data.path);
            mesh = new Artifact(data.name, data.description, texture, data.size, data.is3DModel).mesh;
        } else if (data.type === 'model3d') {
            const modelScene = await loadGLTFModel(data.path);
            mesh = new Artifact(data.name, data.description, modelScene, data.size, data.is3DModel).mesh;
        }
        
        if (mesh) {
            mesh.position.set(data.position.x, data.position.y, data.position.z);
            if (data.rotation) {
                mesh.rotation.set(
                    THREE.MathUtils.degToRad(data.rotation.x),
                    THREE.MathUtils.degToRad(data.rotation.y),
                    THREE.MathUtils.degToRad(data.rotation.z)
                );
            }
            if (data.scale) {
                mesh.scale.set(data.scale.x, data.scale.y, data.scale.z);
            }
            scene.add(mesh);
            loadedArtifacts.push({ mesh, data });
        }
    }
    return loadedArtifacts;
}
Use code with caution.
JavaScript
9. src/components/Artifacts/Artifact.js:
import * as THREE from 'three';

export default class Artifact {
    constructor(name, description, content, size = { width: 1, height: 1, depth: 0.1 }, is3DModel = false) {
        this.name = name;
        this.description = description; // Sáº½ dÃ¹ng cho info panel

        if (is3DModel) { // content lÃ  má»™t THREE.Group (loaded model)
            this.mesh = content;
            // CÃ³ thá»ƒ cáº§n scale model cho phÃ¹ há»£p
            const box = new THREE.Box3().setFromObject(this.mesh);
            const modelSize = new THREE.Vector3();
            box.getSize(modelSize);
            
            const scaleFactor = Math.min(size.width / modelSize.x, size.height / modelSize.y, size.depth / modelSize.z) || 1;
            this.mesh.scale.set(scaleFactor, scaleFactor, scaleFactor);

        } else { // content lÃ  má»™t THREE.Texture (for paintings)
            const geometry = new THREE.BoxGeometry(size.width, size.height, size.depth); // Há»™p má»ng cho tranh
            const material = new THREE.MeshStandardMaterial({ map: content });
            this.mesh = new THREE.Mesh(geometry, material);
        }
        
        this.mesh.name = name; // Äá»ƒ dá»… nháº­n diá»‡n khi raycast
        this.mesh.castShadow = true;
        this.mesh.receiveShadow = true;
    }
}
Use code with caution.
JavaScript
10. src/data/artifactsData.js (VÃ­ dá»¥):
// ÄÃ¢y lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a thÃ´ng tin vá» cÃ¡c hiá»‡n váº­t
// Paths lÃ  tÆ°Æ¡ng Ä‘á»‘i tá»« thÆ° má»¥c /public/
const artifactsData = [
    {
        name: "Bá»©c tranh ÄÃªm Äáº§y Sao",
        description: "ÄÃªm Äáº§y Sao lÃ  má»™t bá»©c tranh sÆ¡n dáº§u cá»§a há»a sÄ© post-impressionist ngÆ°á»i HÃ  Lan Vincent van Gogh...",
        type: "painting", // 'painting' hoáº·c 'model3d'
        path: "textures/artifacts/starry_night.jpg", // Path Ä‘áº¿n texture náº¿u lÃ  painting, hoáº·c model náº¿u lÃ  model3d
        size: { width: 2, height: 1.5, depth: 0.05 }, // KÃ­ch thÆ°á»›c cho tranh hoáº·c bounding box cho model
        position: { x: -5, y: 2, z: -14.5 }, // Gáº§n tÆ°á»ng trÆ°á»›c, bÃªn trÃ¡i
        rotation: { x:0, y:0, z:0 }, // Rotation theo Ä‘á»™
        is3DModel: false
    },
    {
        name: "TÆ°á»£ng David",
        description: "David lÃ  má»™t tÃ¡c pháº©m Ä‘iÃªu kháº¯c báº±ng Ä‘Ã¡ cáº©m tháº¡ch cá»§a Michelangelo, má»™t trong nhá»¯ng tÃ¡c pháº©m ná»•i tiáº¿ng nháº¥t cá»§a Phá»¥c HÆ°ng Ã.",
        type: "model3d",
        path: "models/artifacts/statue_david.glb", // VÃ­ dá»¥ path
        size: { width: 1, height: 2.5, depth: 1 }, // KÃ­ch thÆ°á»›c mong muá»‘n Ä‘á»ƒ scale model
        position: { x: 0, y: 0, z: 0 }, // Äáº·t á»Ÿ giá»¯a phÃ²ng, trÃªn sÃ n
        is3DModel: true
    },
    // ... thÃªm cÃ¡c hiá»‡n váº­t khÃ¡c
];

export default artifactsData;
Use code with caution.
JavaScript
LÆ°u Ã½ quan trá»ng:
Paths: Táº¥t cáº£ cÃ¡c Ä‘Æ°á»ng dáº«n Ä‘áº¿n models, textures, audio trong artifactsData.js pháº£i lÃ  tÆ°Æ¡ng Ä‘á»‘i tá»« thÆ° má»¥c /public. VÃ­ dá»¥, náº¿u model náº±m á»Ÿ /public/models/my_model.glb, path sáº½ lÃ  "models/my_model.glb".
Models: Báº¡n cáº§n táº£i hoáº·c táº¡o cÃ¡c mÃ´ hÃ¬nh 3D (vÃ­ dá»¥: gallery_room.glb, statue_david.glb) vÃ  textures (vÃ­ dá»¥: wall_marble.jpg) vÃ  Ä‘áº·t chÃºng vÃ o thÆ° má»¥c /public/models vÃ  /public/textures tÆ°Æ¡ng á»©ng.
KÃ­ch thÆ°á»›c vÃ  Vá»‹ trÃ­: Cáº©n tháº­n Ä‘iá»u chá»‰nh size, position, rotation trong artifactsData.js Ä‘á»ƒ cÃ¡c hiá»‡n váº­t hiá»ƒn thá»‹ Ä‘Ãºng trong phÃ²ng.
Collision: Logic va cháº¡m trong PlayerControls.js hiá»‡n táº¡i cÃ²n Ä‘Æ¡n giáº£n. Báº¡n cÃ³ thá»ƒ cáº§n cáº£i thiá»‡n nÃ³, vÃ­ dá»¥ báº±ng cÃ¡ch sá»­ dá»¥ng AABB (Axis-Aligned Bounding Boxes) cho tá»«ng Ä‘á»‘i tÆ°á»£ng thay vÃ¬ chá»‰ raycast.
Framework: Code trÃªn lÃ  JavaScript thuáº§n vá»›i Three.js. Náº¿u báº¡n dÃ¹ng React, cáº¥u trÃºc vÃ  cÃ¡ch viáº¿t component sáº½ khÃ¡c (sá»­ dá»¥ng JSX vÃ  hooks cá»§a @react-three/fiber).
Performance: Äá»‘i vá»›i má»™t báº£o tÃ ng lá»›n cÃ³ nhiá»u hiá»‡n váº­t, báº¡n sáº½ cáº§n Ã¡p dá»¥ng cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u hÃ³a Ä‘Ã£ liá»‡t kÃª trong README (LOD, Instancing, etc.).
ÄÃ¢y lÃ  má»™t bá»™ khung khá»Ÿi Ä‘áº§u. Báº¡n sáº½ cáº§n phÃ¡t triá»ƒn thÃªm nhiá»u logic chi tiáº¿t cho tá»«ng tÃ­nh nÄƒng, Ä‘áº·c biá»‡t lÃ  pháº§n UI, mini-map, vÃ  cÃ¡c tÆ°Æ¡ng tÃ¡c phá»©c táº¡p hÆ¡n. ChÃºc báº¡n thÃ nh cÃ´ng vá»›i Ä‘á»“ Ã¡n!
